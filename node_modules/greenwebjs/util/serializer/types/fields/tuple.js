"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TupleField = void 0;
/* eslint-disable @typescript-eslint/no-non-null-assertion */
/* eslint-disable @typescript-eslint/no-explicit-any */
const register_1 = require("../../register");
const TupleField = (fields) => {
    const serializer = {
        serialize: (value, buf) => {
            let buf3 = Buffer.from([]);
            for (let i = 0; i < value.length; ++i) {
                const fieldTyped = fields[i];
                buf3 = fieldTyped.__serializer__.serialize(value[i], buf3);
            }
            return Buffer.concat([buf, buf3]);
        },
        deserialize: (buf) => {
            const arr = [];
            for (let i = 0; i < fields.length; ++i) {
                const fieldTyped = fields[i];
                const deserializationResult = fieldTyped.__serializer__.deserialize(buf);
                const deserializedObj = deserializationResult[0];
                buf = deserializationResult[1];
                if (buf.length === 0 && i < fields.length - 1)
                    throw new Error();
                arr.push(deserializedObj);
            }
            const resTyped = arr;
            return [resTyped, buf];
        },
    };
    return (0, register_1.buildField)(serializer)();
};
exports.TupleField = TupleField;
//# sourceMappingURL=tuple.js.map