"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StringField = void 0;
const register_1 = require("../../register");
exports.StringField = (0, register_1.buildField)({
    serialize: (value, buf) => {
        const buf2 = Buffer.alloc(4);
        const buf3 = Buffer.from(value);
        buf2.writeUInt32BE(value.length);
        return Buffer.concat([buf, buf2, buf3]);
    },
    deserialize: (buf) => {
        if (buf.length < 4)
            throw new Error();
        const size = buf.readUInt32BE();
        buf = buf.slice(4);
        if (buf.length < size)
            throw Error();
        return [
            buf.slice(0, size).toString(),
            buf.slice(size),
        ];
    }
});
//# sourceMappingURL=string.js.map