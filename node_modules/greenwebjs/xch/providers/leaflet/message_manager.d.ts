/// <reference types="node" />
import { Message } from "../../../util/serializer/types/outbound_message";
import { IChiaMessageChannel } from "./chia_message_channel";
export declare type MessageFilter = {
    messageToSend?: Buffer;
    consumeMessage: (msg: Message) => boolean;
    deleteAfterFirstMessageConsumed?: boolean;
    expectedMaxRensponseWait?: number;
};
export declare class MessageManager {
    open: boolean;
    private _createMessageChannel;
    private _msgChannel;
    private _canSendMessage;
    private _controller;
    private _filters;
    private _timeout;
    private _controllerSleepBetweenChecks;
    private _skipTimeoutWait;
    constructor(createMessageChannel: (handleMessage: (rawMsg: Buffer) => void) => Promise<IChiaMessageChannel>, timeout?: number, controllerSleepBetweenChecks?: number);
    initialize(): Promise<void>;
    close(): Promise<void>;
    registerFilter({ messageToSend, consumeMessage, deleteAfterFirstMessageConsumed, expectedMaxRensponseWait }: MessageFilter): Promise<unknown>;
    private _handleMessage;
    private _controllerFunction;
}
