/// <reference types="node" />
import { Network } from "../../../util/network";
export declare function _ensureWebSocket(): void;
export interface ChiaMessageChannelOptions {
    host: string;
    port: number;
    apiKey: string;
    onMessage: (message: Buffer) => void;
    network: Network;
    webSocketCreateFunc: (url: string) => IWebSocket;
}
export interface IChiaMessageChannel {
    connect: () => Promise<void>;
    sendMessage: (message: Buffer) => void;
    close: () => void;
    isConnected: () => boolean;
}
export interface IWebSocket {
    onmessage: ((this: any, ev: any) => any) | null;
    onopen: ((this: any, ev: any) => any) | null;
    onerror: ((this: any, ev: any) => any) | null;
    send: (message: Buffer) => void;
    close: () => void;
    readyState: typeof WebSocket.OPEN;
}
export declare class ChiaMessageChannel implements IChiaMessageChannel {
    private ws;
    private readonly port;
    private readonly host;
    private readonly apiKey;
    private readonly onMessage;
    private readonly network;
    private inboundDataBuffer;
    private webSocketCreateFunc;
    constructor({ host, port, apiKey, onMessage, network, webSocketCreateFunc }: ChiaMessageChannelOptions);
    connect(): Promise<void>;
    sendMessage(message: Buffer): void;
    close(): void;
    isConnected(): boolean;
    private messageHandler;
    private onConnected;
}
